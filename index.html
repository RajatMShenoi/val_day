<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Valentineâ€™s Quiz ðŸ’˜</title>
  <style>
    :root{
      --bg1:#fff5f8;
      --bg2:#ffe3ee;
      --card:#ffffff;
      --text:#1f1f1f;
      --muted:#6b6b6b;
      --accent:#ff3b7a;
      --accent2:#ff7aa6;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Arial, sans-serif;
      color:var(--text);
      min-height:100svh;
      background: radial-gradient(1200px 700px at 20% 0%, var(--bg2), transparent 60%),
                  radial-gradient(900px 600px at 90% 20%, #ffd1e2, transparent 55%),
                  linear-gradient(180deg, var(--bg1), #fff);
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
      padding-top: calc(18px + env(safe-area-inset-top));
      padding-bottom: calc(18px + env(safe-area-inset-bottom));
    }

    .wrap{
      width: min(520px, 100%);
      position:relative;
    }

    .header{
      text-align:center;
      margin-bottom: 14px;
    }
    .title{
      font-size: clamp(22px, 4.8vw, 30px);
      margin: 0;
      letter-spacing: .2px;
    }
    .subtitle{
      margin: 6px 0 0;
      color: var(--muted);
      font-size: 14px;
    }

    .card{
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px;
      border: 1px solid rgba(255,59,122,.12);
      overflow:hidden;
    }

    .progress{
      display:flex;
      gap:8px;
      margin-bottom: 14px;
      justify-content:center;
    }
    .dot{
      width:10px;
      height:10px;
      border-radius:50px;
      background: rgba(255,59,122,.22);
      transition: transform .2s ease, background .2s ease;
    }
    .dot.active{
      background: var(--accent);
      transform: scale(1.2);
    }

    .q{
      margin: 8px 0 14px;
      font-size: 18px;
      line-height:1.25;
      text-align:center;
    }

    .choices{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 12px;
    }

    button.choice{
      width:100%;
      border: 0;
      border-radius: 14px;
      padding: 14px 14px;
      background: linear-gradient(180deg, #fff, #fff);
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
      border: 1px solid rgba(0,0,0,.06);
      font-size: 16px;
      text-align:left;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
      transition: transform .08s ease, border-color .15s ease;
    }
    button.choice:active{
      transform: scale(.99);
    }
    button.choice:hover{
      border-color: rgba(255,59,122,.25);
    }
    .pill{
      font-size: 12px;
      padding: 5px 10px;
      border-radius: 999px;
      background: rgba(255,59,122,.10);
      color: var(--accent);
      white-space:nowrap;
    }

    .photo{
      margin: 10px auto 0;
      width: 100%;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,59,122,.16);
      background:#fff;
    }
    .photo img{
      width:100%;
      display:block;
      max-height: 260px;
      object-fit: cover;
    }
    .hint{
      font-size: 13px;
      color: var(--muted);
      margin-top: 10px;
      text-align:center;
    }

    .footer{
      margin-top: 14px;
      display:flex;
      justify-content:center;
      gap:10px;
      flex-wrap:wrap;
    }
    .mini{
      font-size: 12px;
      color: var(--muted);
    }

    /* Popup / modal */
    .overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.38);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .overlay.show{ display:flex; }
    .modal{
      width: min(420px, 100%);
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
      padding: 16px 16px 14px;
      border: 1px solid rgba(255,59,122,.18);
      text-align:center;
      position:relative;
    }
    .modal h3{
      margin: 6px 0 6px;
      font-size: 18px;
    }
    .modal p{
      margin: 0 0 12px;
      color: var(--muted);
      font-size: 14px;
      line-height:1.35;
    }
    .modal button{
      border:0;
      background: linear-gradient(180deg, var(--accent), #ff2f70);
      color:#fff;
      border-radius: 14px;
      padding: 12px 14px;
      font-size: 15px;
      width: 100%;
      cursor:pointer;
    }

    /* Confetti */
    #confettiCanvas{
      position: fixed;
      inset: 0;
      pointer-events:none;
      z-index: 10;
      display:none;
    }
    #confettiCanvas.show{ display:block; }

    /* Final screen flair */
    .bigLove{
      text-align:center;
      padding: 16px 6px 6px;
    }
    .bigLove .emoji{
      font-size: 52px;
      margin-bottom: 6px;
    }
    .bigLove .msg{
      font-size: 18px;
      line-height:1.3;
      margin: 0;
    }

    /* Tiny floating hearts background (subtle) */
    .floaters{
      position:absolute;
      inset:-10px;
      pointer-events:none;
      overflow:hidden;
      z-index:-1;
    }
    .floater{
      position:absolute;
      opacity:.20;
      filter: blur(.2px);
      animation: floatUp linear infinite;
    }
    @keyframes floatUp{
      from{ transform: translateY(30px); }
      to{ transform: translateY(-700px); }
    }
  </style>
</head>

<body>
  <canvas id="confettiCanvas"></canvas>

  <div class="wrap">
    <div class="floaters" aria-hidden="true" id="floaters"></div>

    <div class="header">
      <h1 class="title">Valentineâ€™s Quiz ðŸ’˜</h1>
      <p class="subtitle">A tiny game made with big love.</p>
    </div>

    <div class="card" role="main" aria-live="polite">
      <div class="progress" aria-label="Progress">
        <div class="dot" id="dot1"></div>
        <div class="dot" id="dot2"></div>
        <div class="dot" id="dot3"></div>
        <div class="dot" id="dot4"></div>
      </div>

      <div id="content"></div>

      <div class="footer">
        <span class="mini" id="miniNote">Tap an option to continue.</span>
      </div>
    </div>
  </div>

  <!-- Popup -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Popup">
    <div class="modal">
      <h3 id="modalTitle">ðŸ’Œ</h3>
      <p id="modalText"></p>
      <button id="modalBtn">OK</button>
    </div>
  </div>

<script>
  // ========== CONFIG YOU CAN EDIT ==========
  const CONFIG = {
    // Q2 photo: put an image file in the same GitHub repo (e.g., "photo.jpg") and update this.
    photoSrc: "herphoto.jpeg", // <-- replace with your filename (e.g., "kyoto.jpg")
    photoAlt: "A photo to guess",

    // Q2 options: set your correct answer text EXACTLY to one of the options below.
    photoQuestion: "We obviously know who this stunning woman isâ€¦<br>but which description fits her best? ðŸ“¸",
    photoOptions: [
      "Smart + Beautiful",
      "Graceful + Gorgeous",
      "Witty + Sexy",
      "Radiant + Magnetic",
      "All of the above"
    ],
    photoCorrect: "All of the above"
  };

  // ========== STATE ==========
  let step = 1;

  const contentEl = document.getElementById("content");
  const miniNoteEl = document.getElementById("miniNote");

  const overlay = document.getElementById("overlay");
  const modalTitle = document.getElementById("modalTitle");
  const modalText = document.getElementById("modalText");
  const modalBtn = document.getElementById("modalBtn");

  const dots = [
    document.getElementById("dot1"),
    document.getElementById("dot2"),
    document.getElementById("dot3"),
    document.getElementById("dot4"),
  ];

  function setDots(){
    dots.forEach((d, idx) => d.classList.toggle("active", idx === step-1));
  }

  function showModal(text, title="ðŸ’Œ", onClose=null){
    modalTitle.textContent = title;
    modalText.textContent = text;
    overlay.classList.add("show");

    function handler(){
      overlay.classList.remove("show");
      modalBtn.removeEventListener("click", handler);
      if (onClose) onClose();
    }
    modalBtn.addEventListener("click", handler);
  }

  function render(){
    setDots();
    if(step === 1) renderQ1();
    if(step === 2) renderQ2();
    if(step === 3) renderQ3();
    if(step === 4) renderQ4();
  }

  function button(label, badgeText=null, onClick){
    const btn = document.createElement("button");
    btn.className = "choice";
    btn.type = "button";

    const left = document.createElement("span");
    left.textContent = label;

    const right = document.createElement("span");
    right.className = "pill";
    right.textContent = badgeText || "tap";

    btn.appendChild(left);
    btn.appendChild(right);
    btn.addEventListener("click", onClick);
    return btn;
  }

  // ========== Q1 ==========
  function renderQ1(){
    miniNoteEl.textContent = "Pick the correct (and cutest) answer.";

    contentEl.innerHTML = "";
    const q = document.createElement("div");
    q.className = "q";
    q.textContent = "When do you think I fell in love with you?";
    contentEl.appendChild(q);

    const choices = document.createElement("div");
    choices.className = "choices";

    const options = [
      "When I took care of you when you got drunk ðŸ˜Œ",
      "When we got talking ðŸ˜Œ",
      "The moment I laid my eyes on you ðŸ˜",
      "When you smiled at me ðŸ˜Œ"
    ];

    options.forEach(opt => {
      const isCheesyCorrect = (opt === "The moment I laid my eyes on you ðŸ˜");
      choices.appendChild(button(opt, isCheesyCorrect ? "correct" : "hmm", () => {
        if(isCheesyCorrect){
          showModal("You know how cheesy I am!", "ðŸ§€", () => {
            step = 2;
            render();
          });
        } else {
          showModal("Sure, this too...but â€” try another one ðŸ˜", "ðŸ’­");
        }
      }));
    });

    contentEl.appendChild(choices);
  }

  // ========== Q2 ==========
  function renderQ2(){
    miniNoteEl.textContent = "Let's see whether you know this person well.. ðŸ˜‰";

    contentEl.innerHTML = "";

    const q = document.createElement("div");
    q.className = "q";
    q.textContent = CONFIG.photoQuestion;
    contentEl.appendChild(q);

    const photo = document.createElement("div");
    photo.className = "photo";
    const img = document.createElement("img");
    img.src = CONFIG.photoSrc;
    img.alt = CONFIG.photoAlt;
    img.loading = "eager";
    photo.appendChild(img);
    contentEl.appendChild(photo);

    const hint = document.createElement("div");
    hint.className = "hint";
    hint.textContent = "Tap the right place to unlock a surprise.";
    contentEl.appendChild(hint);

    const choices = document.createElement("div");
    choices.className = "choices";

    CONFIG.photoOptions.forEach(opt => {
      const isCorrect = (opt === CONFIG.photoCorrect);
      choices.appendChild(button(opt, isCorrect ? "ðŸŒ" : "ðŸ¤”", () => {
        if(isCorrect){
          showModal("â¤ï¸", "Thatâ€™s right. Sheâ€™s the complete package.", () => {
            step = 3;
            render();
          });
        } else {
          showModal("Not this one, Try again.", "-");
        }
      }));
    });

    contentEl.appendChild(choices);
  }

  // ========== Q3 ==========
  function renderQ3(){
    miniNoteEl.textContent = "Choose wisely (it wonâ€™t matter ðŸ˜ˆ).";

    contentEl.innerHTML = "";
    const q = document.createElement("div");
    q.className = "q";
    q.textContent = "Do you think I love you more or you do?";
    contentEl.appendChild(q);

    const choices = document.createElement("div");
    choices.className = "choices";

    const opts = [
      { label: "Me", badge:"ðŸ˜Œ" },
      { label: "You", badge:"ðŸ¥º" }
    ];

    opts.forEach(o => {
      choices.appendChild(button(o.label, o.badge, () => {
        // Both lead to the same cheeky message as requested
        const line = `${o.label} = Exactly! Rajat loves you more. I knew you'd admit it as some point.`;
        showModal(line, "ðŸ˜", () => {
          step = 4;
          render();
        });
      }));
    });

    contentEl.appendChild(choices);
  }

  // ========== Q4 ==========
  function renderQ4(){
    miniNoteEl.textContent = "One last thingâ€¦";

    contentEl.innerHTML = "";

    const q = document.createElement("div");
    q.className = "q";
    q.textContent = "Raveena, will you be my valentine?";
    contentEl.appendChild(q);

    const choices = document.createElement("div");
    choices.className = "choices";

    const allYes = ["Yes! ðŸ’˜", "YES!! ðŸ˜", "Obviously yes ðŸ˜Œ", "YES YES YES ðŸ’ž"];
    allYes.forEach(opt => {
      choices.appendChild(button(opt, "âœ…", () => {
        startConfetti();
        showModal("I knew it! I love you so much my sweat pea! Thank you for making the most luckiest husband in this world!", "ðŸŽ‰", () => {
          // Replace card content with a final screen
          contentEl.innerHTML = "";
          const final = document.createElement("div");
          final.className = "bigLove";
          final.innerHTML = `
            <div class="emoji">ðŸ’–ðŸŽŠðŸ’–</div>
            <p class="msg"><strong>Happy Valentineâ€™s Day.</strong><br/>Youâ€™re my favorite person forever.</p>
          `;
          contentEl.appendChild(final);
          miniNoteEl.textContent = "Made with love â€” Rajat";
        });
      }));
    });

    contentEl.appendChild(choices);
  }

  // ========== CONFETTI (Canvas) ==========
  const canvas = document.getElementById("confettiCanvas");
  const ctx = canvas.getContext("2d");
  let confettiActive = false;
  let pieces = [];
  let rafId = null;

  function resizeCanvas(){
    canvas.width = window.innerWidth * devicePixelRatio;
    canvas.height = window.innerHeight * devicePixelRatio;
    ctx.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, 0, 0);
  }
  window.addEventListener("resize", resizeCanvas);

  function rand(min,max){ return Math.random()*(max-min)+min; }

  function makePieces(count=180){
    const colors = ["#ff3b7a","#ff7aa6","#ffcc00","#7dd3fc","#a7f3d0","#c4b5fd","#fb7185","#fda4af"];
    const arr = [];
    for(let i=0;i<count;i++){
      arr.push({
        x: rand(0, window.innerWidth),
        y: rand(-window.innerHeight, 0),
        w: rand(6, 10),
        h: rand(10, 16),
        vx: rand(-1.2, 1.2),
        vy: rand(2.2, 5.5),
        rot: rand(0, Math.PI),
        vr: rand(-0.12, 0.12),
        color: colors[Math.floor(Math.random()*colors.length)],
        shape: Math.random() < 0.15 ? "heart" : "rect"
      });
    }
    return arr;
  }

  function drawHeart(x,y,size,color,rot){
    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(rot);
    ctx.scale(size/18, size/18);
    ctx.fillStyle = color;
    ctx.beginPath();
    ctx.moveTo(0, 6);
    ctx.bezierCurveTo(0, 0, -9, 0, -9, 6);
    ctx.bezierCurveTo(-9, 12, 0, 15, 0, 18);
    ctx.bezierCurveTo(0, 15, 9, 12, 9, 6);
    ctx.bezierCurveTo(9, 0, 0, 0, 0, 6);
    ctx.closePath();
    ctx.fill();
    ctx.restore();
  }

  function tick(){
    if(!confettiActive) return;
    ctx.clearRect(0,0,window.innerWidth, window.innerHeight);

    pieces.forEach(p => {
      p.x += p.vx;
      p.y += p.vy;
      p.rot += p.vr;

      if(p.y > window.innerHeight + 30){
        p.y = rand(-200, -20);
        p.x = rand(0, window.innerWidth);
      }
      if(p.x < -20) p.x = window.innerWidth + 20;
      if(p.x > window.innerWidth + 20) p.x = -20;

      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot);

      if(p.shape === "heart"){
        ctx.restore();
        drawHeart(p.x, p.y, rand(14, 20), p.color, p.rot);
      } else {
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
        ctx.restore();
      }
    });

    rafId = requestAnimationFrame(tick);
  }

  function startConfetti(){
    resizeCanvas();
    canvas.classList.add("show");
    confettiActive = true;
    pieces = makePieces(200);
    if(rafId) cancelAnimationFrame(rafId);
    tick();
    // keep it running; you can stop it later if you want
  }

  // ========== SUBTLE FLOATING HEARTS BACKGROUND ==========
  function initFloaters(){
    const el = document.getElementById("floaters");
    el.innerHTML = "";
    const count = 10;
    for(let i=0;i<count;i++){
      const s = document.createElement("div");
      s.className = "floater";
      s.textContent = Math.random() < 0.5 ? "ðŸ’—" : "ðŸ’ž";
      s.style.left = rand(0, 100) + "%";
      s.style.bottom = rand(-30, 40) + "px";
      s.style.fontSize = rand(18, 34) + "px";
      s.style.animationDuration = rand(9, 18) + "s";
      s.style.animationDelay = rand(0, 6) + "s";
      el.appendChild(s);
    }
  }

  // ========== BOOT ==========
  initFloaters();
  render();
</script>
</body>
</html>
